<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="@{layout/default}">

	<th:block layout:fragment="customTitle">
		<div class="col-sm-6">
			<h1 class="m-0">회원가입</h1>
		</div>
		<!-- /.col -->
	
	</th:block>
	
	<!-- contents layout:fragment 정의 -->
	<th:block layout:fragment="customContents">
		<div class="card card-primary">
			<div class="card-header">
				<h3 class="card-title"></h3>
			</div>
			
			<form th:action="@{/join}" class="form-horizontal" method="post">
				<div class="card-body">
					<div class="form-group">
					  	<label for="exampleInputName">이름</label>
					  	<input type="text" class="form-control" id="exampleInputEmail1" name="inpugName" placeholder="Name">
					</div>
					<div class="form-group">
					  	<label for="userIdCheck">아이디</label>
					  	<input type="text" class="form-control" id="userIdCheck" name="inputId" placeholder="ID" required>
					  	<div class="check_font" id="id_check">
<script>
// 아이디 유효성 검사(1 = 중복 / 0 != 중복)
	$("#userIdCheck").blur(function() {
		// id = "id_reg" / name = "userId"
		var user_id = $('#user_id').val();
		$.ajax({
			url : '${pageContext.request.contextPath}/user/idCheck?userId='+ user_id,
			type : 'get',
			success : function(data) {
				console.log("1 = 중복o / 0 = 중복x : "+ data);							
				
				if (data == 1) {
						// 1 : 아이디가 중복되는 문구
						$("#userIdCheck").text("사용중인 아이디입니다 :p");
						$("#id_check").css("color", "red");
						$("#reg_submit").attr("disabled", true);
					} else {
						
						if(idJ.test(user_id)){
							// 0 : 아이디 길이 / 문자열 검사
							$("#id_check").text("");
							$("#reg_submit").attr("disabled", false);
				
						} else if(user_id == ""){
							
							$('#id_check').text('아이디를 입력해주세요 :)');
							$('#id_check').css('color', 'red');
							$("#reg_submit").attr("disabled", true);				
							
						} else {
							
							$('#id_check').text("아이디는 소문자와 숫자 4~12자리만 가능합니다 :) :)");
							$('#id_check').css('color', 'red');
							$("#reg_submit").attr("disabled", true);
						}
						
					}
				}, error : function() {
						console.log("실패");
				}
			});
		});
</script>					  	
					  	</div>
					  	
					</div>									
					<div class="form-group">
					  	<label for="exampleInputPassword1">비밀번호</label>
					  	<input type="password" class="form-control" id="exampleInputPassword1" name="inputPw" placeholder="Password">
					</div>
					<div class="form-group">
					  	<label for="exampleInputEmail1">이메일</label>
					  	<input type="email" class="form-control" id="exampleInputEmail1" name="inputEmail" placeholder="Enter email">
					</div>
					<div class="form-group">
						<label>휴대폰번호</label>
						<div class="input-group">
							<div class="input-group-prepend">
								<span class="input-group-text"><i class="fas fa-phone"></i></span>
							</div>
						  <input type="text" class="form-control" name="inputPhoneNum" data-inputmask="&quot;mask&quot;: &quot;999 9999-9999&quot;" data-mask="" inputmode="text" >
						</div>
					</div>					
					<div class="form-group">
					  	<label for="exampleInputNick">영어닉네님</label>
					  	<input type="text" class="form-control" id="exampleInputEmail1" name="inputNick" placeholder="NickName">
					</div>
					<div class="form-group" name="">
						<label for="exampleInputPassword1">생년월일</label>
						<div>
							<select name="yy" id="year"></select>년 
							<select name="mm" id="month"></select>월 
							<select name="dd" id="day"></select>일
						</div>						
						<script type="text/javascript">
							$(document).ready(function(){            
							    var now = new Date();
							    var year = now.getFullYear();
							    var mon = (now.getMonth() + 1) > 9 ? ''+(now.getMonth() + 1) : '0'+(now.getMonth() + 1); 
							    var day = (now.getDate()) > 9 ? ''+(now.getDate()) : '0'+(now.getDate());           
							    //년도 selectbox만들기               
							    for(var i = 1900 ; i <= year ; i++) {
							        $('#year').append('<option value="' + i + '">' + i + '년</option>');    
							    }
							    // 월별 selectbox 만들기            
							    for(var i=1; i <= 12; i++) {
							        var mm = i > 9 ? i : "0"+i ;            
							        $('#month').append('<option value="' + mm + '">' + mm + '월</option>');    
							    }
							    // 일별 selectbox 만들기
							    for(var i=1; i <= 31; i++) {
							        var dd = i > 9 ? i : "0"+i ;            
							        $('#day').append('<option value="' + dd + '">' + dd+ '일</option>');    
							    }
							    $("#year  > option[value="+year+"]").attr("selected", "true");        
							    $("#month  > option[value="+mon+"]").attr("selected", "true");    
							    $("#day  > option[value="+day+"]").attr("selected", "true");       
							})
						</script> 
					</div>										
					
					<div class="form-check">
					  <input type="checkbox" class="form-check-input" id="exampleCheck1">
					  <label class="form-check-label" for="exampleCheck1">개인정보 동의</label>
					</div>
				</div>
				<div class="card-footer">
				  <button type="submit" class="btn btn-primary">가입완료</button>
				</div>
		</form>
	</th:block>

</html>
